[gd_scene load_steps=15 format=3 uid="uid://bwx1ygvwk1cwj"]

[ext_resource type="Texture2D" uid="uid://bhm8ejjl2sa26" path="res://art/sprites/lights/ring-halo-1.png" id="1_r6q5i"]
[ext_resource type="Texture2D" uid="uid://cvcc60svfqim0" path="res://art/s2s.bg.png" id="2_3jikf"]
[ext_resource type="Script" path="res://scenes/kill_light.gd" id="2_84vhp"]
[ext_resource type="Shader" path="res://scenes/parry-ring-debug.gdshader" id="3_6i1b5"]
[ext_resource type="Texture2D" uid="uid://c7u3xb5mo3n3t" path="res://art/sprites/debug/512-blank.png" id="4_lsmaa"]
[ext_resource type="Shader" path="res://ring-shader-area.gdshader" id="4_ouufx"]
[ext_resource type="Texture2D" uid="uid://d0iai05rfiddw" path="res://art/sprites/lights/parry-halo.png" id="5_76imm"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_pypbu"]
shader = ExtResource("3_6i1b5")
shader_parameter/highlight_color = Color(1, 1, 0, 1)
shader_parameter/circle_radius = 0.227
shader_parameter/ring_width = 0.076

[sub_resource type="ShaderMaterial" id="ShaderMaterial_ogiuw"]
shader = ExtResource("4_ouufx")
shader_parameter/highlight_color = Color(0, 0, 0, 0)
shader_parameter/circle_radius = 0.316
shader_parameter/highlight_width = 0.124
shader_parameter/feather_width = 0.252
shader_parameter/start_angle = 360.0
shader_parameter/end_angle = 360.0

[sub_resource type="Animation" id="Animation_cgn7l"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:material:shader_parameter/start_angle")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [360.0]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath(".:material:shader_parameter/end_angle")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [360.0]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath(".:self_modulate")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Color(1, 1, 1, 0.403922)]
}

[sub_resource type="Animation" id="Animation_ytdj7"]
resource_name = "parry_activate"
length = 0.5
step = 0.05
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:scale")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0.05, 0.25, 0.5),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [Vector2(1, 1), Vector2(1.75, 1.75), Vector2(1, 1)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath(".:self_modulate")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.05, 0.2, 0.25, 0.5),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1),
"update": 0,
"values": [Color(1, 1, 1, 0.403922), Color(1, 1, 1, 1), Color(1, 1, 1, 0), Color(1, 1, 1, 0), Color(1, 1, 1, 0.105882)]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("../PointLight2D:scale")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0.05, 0.25, 0.5),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [Vector2(1, 1), Vector2(1.75, 1.75), Vector2(1, 1)]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("../PointLight2D:color")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0, 0.05, 0.2, 0.25, 0.5),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1),
"update": 0,
"values": [Color(1, 1, 1, 0.403922), Color(1, 1, 1, 1), Color(1, 1, 1, 0), Color(1, 1, 1, 0), Color(1, 1, 1, 0.105882)]
}

[sub_resource type="Animation" id="Animation_kolwd"]
resource_name = "parry_recharge"
length = 0.6
step = 0.05
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:material:shader_parameter/start_angle")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2, 0.3, 0.4, 0.5),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1),
"update": 0,
"values": [0.0, 0.0, 90.0, 180.0, 270.0, 360.0]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath(".:material:shader_parameter/end_angle")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2, 0.3, 0.4, 0.5),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1),
"update": 0,
"values": [0.0, 90.0, 180.0, 270.0, 360.0, 360.0]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath(".:self_modulate")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0.5, 0.6),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Color(1, 1, 1, 0.054902), Color(1, 1, 1, 0.305882)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_tkj07"]
_data = {
"RESET": SubResource("Animation_cgn7l"),
"parry_activate": SubResource("Animation_ytdj7"),
"parry_recharge": SubResource("Animation_kolwd")
}

[sub_resource type="CircleShape2D" id="CircleShape2D_dykci"]
radius = 194.659

[node name="KillLight" type="Node2D"]
script = ExtResource("2_84vhp")
draw_circle = true
circle_radius = 190
num_points = 30

[node name="DebugDisplay" type="Node2D" parent="."]
visible = false

[node name="S2s_bg" type="Sprite2D" parent="DebugDisplay"]
position = Vector2(73, 53)
texture = ExtResource("2_3jikf")

[node name="CanvasModulate" type="CanvasModulate" parent="DebugDisplay"]
scale = Vector2(3.29806, 1.78868)
color = Color(0.34902, 0.34902, 0.34902, 1)

[node name="RingDebug" type="Sprite2D" parent="DebugDisplay"]
visible = false
material = SubResource("ShaderMaterial_pypbu")
scale = Vector2(1.44, 1.44)
texture = ExtResource("4_lsmaa")

[node name="Ring-halo-1" type="Sprite2D" parent="."]
self_modulate = Color(1, 1, 1, 0.403922)
material = SubResource("ShaderMaterial_ogiuw")
texture = ExtResource("1_r6q5i")

[node name="PointLight2D" type="PointLight2D" parent="."]
self_modulate = Color(1, 1, 1, 0)
color = Color(1, 1, 1, 0.105882)
shadow_enabled = true
texture = ExtResource("5_76imm")
texture_scale = 0.86

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
root_node = NodePath("../Ring-halo-1")
libraries = {
"": SubResource("AnimationLibrary_tkj07")
}

[node name="Area2D" type="Area2D" parent="."]
visible = false

[node name="CollisionShape2D" type="CollisionShape2D" parent="Area2D"]
visible = false
shape = SubResource("CircleShape2D_dykci")

[node name="PointLight2D2" type="PointLight2D" parent="."]
visible = false
shadow_enabled = true
texture = ExtResource("1_r6q5i")

[connection signal="animation_finished" from="AnimationPlayer" to="." method="_on_animation_player_animation_finished"]
